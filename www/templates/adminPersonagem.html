<ion-view view-title="Administrar Personagem">
    <ion-content>
      <div class="list card">
        <div class="item item-thumbnail-left">
            <img src="img/clanlogos/caitiff.png">
            <h2><b><span ng-bind="admPersonagem.nome"></span></b></h2>
            <p><span ng-bind="admPersonagem.seita"></span> - <span ng-bind="admPersonagem.clan"></span></p>
            <p>Jogador: <b><span ng-bind="admPersonagem.jogador"></span></b></p>
            <p>Aprovado: <b><span ng-bind="admPersonagem.aprovado"></span></b></p>
            <div>
              <button class="button button-positive" ng-show="admPersonagem.aprovado == 'N'" ng-click="aprovar()" >Aprovar</button>
              <button class="button button-assertive" ng-show="admPersonagem.aprovado == 'S'" ng-click="reprovar()">Reprovar</button>
            </div>
        </div>
        <div class="item item-divider" ng-click="shHistoria=!shHistoria">
          História
        </div>
        <div class="item item-text-wrap" ng-show="shHistoria">
          <pre>{{admPersonagem.historia ? admPersonagem.historia : 'História ainda não foi criada!'}}</pre>
        </div>
        <div class="item item-divider" ng-click="shPlanilha=!shPlanilha">
          Planilha
        </div>
        <div class="item item-text-wrap" ng-show="shPlanilha">
          <pre>{{admPersonagem.planilha ? admPersonagem.planilha : 'Planilha ainda não foi criada!'}}</pre>
        </div>
        <div class="item item-divider" ng-click="shRumores=!shRumores">
          Rumores
        </div>
        <div class="item item-text-wrap" ng-show="shRumores">
          <pre>{{admPersonagem.rumores ? admPersonagem.rumores : 'Rumores ainda não foram criados!'}}</pre>
        </div>
        <div class="item item-divider" ng-click="shAntec=!shAntec">
          Antecedentes
        </div>
        <div class="item item-text-wrap" ng-show="shAntec">
          <pre>{{admPersonagem.antecedentes ? admPersonagem.antecedentes : 'Antecedentes ainda não foram criados!'}}</pre>
        </div>
        <div class="item item-divider" ng-click="shXP=!shXP">
          Pontos de experiência
          <span class="badge badge-positive">{{getTotalXP()}}</span>
        </div>
        <div class="item item-text-wrap" ng-show="shXP">
          <form name="vm.xpform" ng-submit="addXP()" novalidate>
            <div class="list">
              <!--
              <div class="item item-divider row">
                  <div class="col"><b>Data</b></div>
                  <div class="col col-50"><b>Descrição</b></div>
                  <div class="col col-20"><b>Valor</b></div>
                  <div class="col col-10">&nbsp;</div>
              </div>
              -->
              <div class="item row" ng-repeat="xp in xpArray | orderBy : '-data'">
                  <div class="col">{{xp.data | date : 'dd/MM/yyyy'}}</div>
                  <div class="col col-40">{{xp.descricao}}</div>
                  <div class="col col-20">{{xp.valor}}</div>
                  <div class="col col-20"><button class="button icon ion-trash-b" ng-click="delXP(xp)"></button></div>
              </div>
            </div>
            <div class="list">
              <div class="item item-divider row">
                Adicionar XP
              </div>
              <label class="item item-input item-stacked-label" >
                  <span class="input-label">Data</span>
                  <input type="date" name="data" ng-model="xpData.data" required>
                  <p style="color: red" ng-show="xpform.data.$error.required && !xpform.data.$pristine">* Data é obrigatória</p>
              </label>
              <label class="item item-input item-stacked-label" >
                  <span class="input-label">Descrição</span>
                  <input type="text" name="descricao" ng-model="xpData.descricao" required>
                  <p style="color: red" ng-show="xpform.descricao.$error.required && !xpform.descricao.$pristine">* Descrição é obrigatória</p>
              </label>
              <label class="item item-input item-stacked-label" >
                  <span class="input-label">valor</span>
                  <input type="number" ng-model="xpData.valor" required>
              </label>
              <div>
                  <button type="submit" class="button button-block button-positive" >Adicionar</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </ion-content>
</ion-view>